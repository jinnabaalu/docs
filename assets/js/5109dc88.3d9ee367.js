"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1903],{8108:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>o,frontMatter:()=>t,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"elasticsearch/index/AnalyzerNGram","title":"N-gram for Substring Matching in Elasticsearch","description":"\ud83e\udde0 What\u2019s the Difference Between Edge N-gram and N-gram?","source":"@site/docs/elasticsearch/index/AnalyzerNGram.md","sourceDirName":"elasticsearch/index","slug":"/elasticsearch/index/AnalyzerNGram","permalink":"/oio/docs/elasticsearch/index/AnalyzerNGram","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/elasticsearch/index/AnalyzerNGram.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Edge N-grams for Autocomplete","permalink":"/oio/docs/elasticsearch/index/AnalyzerEdgeNGrams"},"next":{"title":"\ud83c\udf0d Language-Specific Analyzers in Elasticsearch","permalink":"/oio/docs/elasticsearch/index/AnalyzerLanguage"}}');var a=r(4848),i=r(8453);const t={sidebar_position:10},c="N-gram for Substring Matching in Elasticsearch",l={},d=[{value:"\ud83e\udde0 What\u2019s the Difference Between Edge N-gram and N-gram?",id:"-whats-the-difference-between-edge-n-gram-and-n-gram",level:2},{value:"\ud83d\udd25 Use Case",id:"-use-case",level:2},{value:"\ud83d\udee0\ufe0f Minimal Working N-gram Config",id:"\ufe0f-minimal-working-n-gram-config",level:2},{value:"\ud83d\udd27 1. Create Index with N-gram Analyzer",id:"-1-create-index-with-n-gram-analyzer",level:3},{value:"\ud83d\udce5 2. Index Docs",id:"-2-index-docs",level:3},{value:"\ud83d\udd0d 3. Search by Substring",id:"-3-search-by-substring",level:3},{value:"\u2705 Result:",id:"-result",level:3},{value:"\ud83e\udde8 Warning",id:"-warning",level:2},{value:"\ud83e\udde9 Summary",id:"-summary",level:2}];function h(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"n-gram-for-substring-matching-in-elasticsearch",children:"N-gram for Substring Matching in Elasticsearch"})}),"\n",(0,a.jsx)(n.h2,{id:"-whats-the-difference-between-edge-n-gram-and-n-gram",children:"\ud83e\udde0 What\u2019s the Difference Between Edge N-gram and N-gram?"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Analyzer Type"}),(0,a.jsx)(n.th,{children:"What it Matches"}),(0,a.jsxs)(n.th,{children:["Example Search: ",(0,a.jsx)(n.code,{children:"err"})]})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"Edge N-gram"}),(0,a.jsxs)(n.td,{children:["Only ",(0,a.jsx)(n.strong,{children:"prefixes"})]}),(0,a.jsxs)(n.td,{children:["\u274c No match for ",(0,a.jsx)(n.code,{children:'"blueberry"'})]})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"N-gram"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.strong,{children:"Any substring"})}),(0,a.jsxs)(n.td,{children:["\u2705 Matches ",(0,a.jsx)(n.code,{children:'"blueberry"'})]})]})]})]}),"\n",(0,a.jsx)(n.h2,{id:"-use-case",children:"\ud83d\udd25 Use Case"}),"\n",(0,a.jsxs)(n.p,{children:["You type: ",(0,a.jsx)(n.code,{children:"err"}),(0,a.jsx)(n.br,{}),"\n","You want suggestions like:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"blueberry"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"blackberry"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"cherry"})}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Edge N-gram fails"}),".",(0,a.jsx)(n.br,{}),"\n",(0,a.jsx)(n.strong,{children:"N-gram wins"}),"."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"\ufe0f-minimal-working-n-gram-config",children:"\ud83d\udee0\ufe0f Minimal Working N-gram Config"}),"\n",(0,a.jsx)(n.h3,{id:"-1-create-index-with-n-gram-analyzer",children:"\ud83d\udd27 1. Create Index with N-gram Analyzer"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'PUT test_ngram\n{\n  "settings": {\n    "analysis": {\n      "filter": {\n        "ngram_filter": {\n          "type": "ngram",\n          "min_gram": 2,\n          "max_gram": 10\n        }\n      },\n      "analyzer": {\n        "ngram_analyzer": {\n          "type": "custom",\n          "tokenizer": "standard",\n          "filter": [\n            "lowercase",\n            "ngram_filter"\n          ]\n        },\n        "search_analyzer": {\n          "type": "custom",\n          "tokenizer": "standard",\n          "filter": ["lowercase"]\n        }\n      }\n    }\n  },\n  "mappings": {\n    "properties": {\n      "name": {\n        "type": "text",\n        "analyzer": "ngram_analyzer",\n        "search_analyzer": "search_analyzer"\n      }\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"-2-index-docs",children:"\ud83d\udce5 2. Index Docs"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'POST test_ngram/_doc\n{ "name": "blueberry" }\n\nPOST test_ngram/_doc\n{ "name": "blackberry" }\n\nPOST test_ngram/_doc\n{ "name": "cherry" }\n'})}),"\n",(0,a.jsx)(n.h3,{id:"-3-search-by-substring",children:"\ud83d\udd0d 3. Search by Substring"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-json",children:'POST test_ngram/_search\n{\n  "query": {\n    "match": {\n      "name": "err"\n    }\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"-result",children:"\u2705 Result:"}),"\n",(0,a.jsx)(n.p,{children:"Returns:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"blueberry"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"blackberry"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.code,{children:"cherry"})}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-warning",children:"\ud83e\udde8 Warning"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"N-grams increase index size \u2014 a lot of token combos get stored."}),"\n",(0,a.jsx)(n.li,{children:"Don\u2019t use on long text fields."}),"\n",(0,a.jsx)(n.li,{children:"Best for autocomplete on names, tags, cities, etc."}),"\n"]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"-summary",children:"\ud83e\udde9 Summary"}),"\n",(0,a.jsxs)(n.p,{children:["Use ",(0,a.jsx)(n.strong,{children:"Edge N-gram"})," when you need ",(0,a.jsx)(n.strong,{children:"prefix-based autocomplete"}),".",(0,a.jsx)(n.br,{}),"\n","Use ",(0,a.jsx)(n.strong,{children:"N-gram"})," when you need ",(0,a.jsx)(n.strong,{children:"substring-based match"}),"."]})]})}function o(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>t,x:()=>c});var s=r(6540);const a={},i=s.createContext(a);function t(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:t(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);