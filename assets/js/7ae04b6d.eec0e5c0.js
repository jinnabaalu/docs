"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7872],{1914:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>r,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>o});const a=JSON.parse('{"id":"elasticsearch/index/Alias","title":"Alias","description":"\ud83d\udd04 Elasticsearch Alias Explained with Hands-On Examples","source":"@site/docs/elasticsearch/index/Alias.md","sourceDirName":"elasticsearch/index","slug":"/elasticsearch/index/Alias","permalink":"/oio/docs/elasticsearch/index/Alias","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/elasticsearch/index/Alias.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2,"title":"Alias"},"sidebar":"tutorialSidebar","previous":{"title":"Design Index","permalink":"/oio/docs/elasticsearch/index/IndexDesign"},"next":{"title":"Mappings","permalink":"/oio/docs/elasticsearch/index/Mappings"}}');var i=s(4848),t=s(8453);const l={sidebar_position:2,title:"Alias"},d=void 0,r={},o=[{value:"\ud83d\udd04 Elasticsearch Alias Explained with Hands-On Examples",id:"-elasticsearch-alias-explained-with-hands-on-examples",level:2},{value:"\ud83c\udfaf What Is an Alias?",id:"-what-is-an-alias",level:3},{value:"\u2705 Step-by-Step Demo",id:"-step-by-step-demo",level:3},{value:"\ud83d\udd39 Create a Base Index and Add Sample Doc",id:"-create-a-base-index-and-add-sample-doc",level:4},{value:"\ud83d\udd39 Add Alias to the Index",id:"-add-alias-to-the-index",level:4},{value:"\ud83d\udd0e Query Using Alias",id:"-query-using-alias",level:4},{value:"\ud83c\udd95 Add Another Index and Use Same Alias",id:"-add-another-index-and-use-same-alias",level:3},{value:"\ud83d\udd39 Create Another Index with a Doc",id:"-create-another-index-with-a-doc",level:4},{value:"\ud83d\udd39 Assign Same Alias to This Index Too",id:"-assign-same-alias-to-this-index-too",level:4},{value:"\ud83d\udd0d Query Using the Alias \u2014 Now Fetches from Both",id:"-query-using-the-alias--now-fetches-from-both",level:4},{value:"\u274c Try Writing Through Alias \u2014 Expect Failure",id:"-try-writing-through-alias--expect-failure",level:3},{value:"\u270d\ufe0f Set the Write Index Explicitly",id:"\ufe0f-set-the-write-index-explicitly",level:3},{value:"\ud83d\udd01 Now Try Posting Again",id:"-now-try-posting-again",level:4},{value:"\ud83d\udd0e Search Again \u2014 You\u2019ll See the New Doc",id:"-search-again--youll-see-the-new-doc",level:4},{value:"\ud83d\udccc View Alias Mappings",id:"-view-alias-mappings",level:3},{value:"\ud83e\udde0 TL;DR",id:"-tldr",level:3}];function c(e){const n={blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"-elasticsearch-alias-explained-with-hands-on-examples",children:"\ud83d\udd04 Elasticsearch Alias Explained with Hands-On Examples"}),"\n",(0,i.jsxs)(n.p,{children:["When you're running real-world Elasticsearch setups, hardcoding index names can be a pain \u2014 especially when you want to rotate, version, or switch data stores without breaking clients. That\u2019s where ",(0,i.jsx)(n.strong,{children:"aliases"})," come in."]}),"\n",(0,i.jsxs)(n.p,{children:["Aliases act as ",(0,i.jsx)(n.strong,{children:"abstracted, logical names"})," pointing to one or more real indices."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-what-is-an-alias",children:"\ud83c\udfaf What Is an Alias?"}),"\n",(0,i.jsx)(n.p,{children:"An alias is a virtual index name that you can use in place of the actual index name in search, aggregation, or even write operations. Aliases help:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Hide actual index names from clients"}),"\n",(0,i.jsx)(n.li,{children:"Switch between versions of indexes seamlessly"}),"\n",(0,i.jsx)(n.li,{children:"Perform zero-downtime reindexing"}),"\n",(0,i.jsx)(n.li,{children:"Load balance queries across multiple indexes"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-step-by-step-demo",children:"\u2705 Step-by-Step Demo"}),"\n",(0,i.jsx)(n.h4,{id:"-create-a-base-index-and-add-sample-doc",children:"\ud83d\udd39 Create a Base Index and Add Sample Doc"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'PUT /index_components_default/_doc/1\n{\n  "name": "Baalu",\n  "age": 32,\n  "active": true,\n  "created_at": "2024-05-04T12:00:00Z",\n  "status": "enabled",\n  "ip": "192.168.0.1",\n  "location": {\n    "lat": 12.97,\n    "lon": 77.59\n  },\n  "tags": ["infra", "devops"],\n  "address": {\n    "city": "Chennai",\n    "pin": 600001\n  },\n  "projects": [\n    { "name": "X", "status": "done" },\n    { "name": "Y", "status": "in-progress" }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"-add-alias-to-the-index",children:"\ud83d\udd39 Add Alias to the Index"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /_aliases\n{\n  "actions": [\n    { "add": { "index": "index_components_default", "alias": "components_alias" }}\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"-query-using-alias",children:"\ud83d\udd0e Query Using Alias"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /components_alias/_search\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-add-another-index-and-use-same-alias",children:"\ud83c\udd95 Add Another Index and Use Same Alias"}),"\n",(0,i.jsx)(n.h4,{id:"-create-another-index-with-a-doc",children:"\ud83d\udd39 Create Another Index with a Doc"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'PUT /index_components_default_v2/_doc/1\n{\n  "name": "Test User",\n  "age": 32,\n  "active": true,\n  "created_at": "2024-05-04T12:00:00Z",\n  "status": "enabled",\n  "ip": "192.168.0.1",\n  "location": {\n    "lat": 12.97,\n    "lon": 77.59\n  },\n  "tags": ["infra", "devops"],\n  "address": {\n    "city": "Chennai",\n    "pin": 600001\n  },\n  "projects": [\n    { "name": "X", "status": "done" },\n    { "name": "Y", "status": "in-progress" }\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"-assign-same-alias-to-this-index-too",children:"\ud83d\udd39 Assign Same Alias to This Index Too"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /_aliases\n{\n  "actions": [\n    { "add": { "index": "index_components_default_v2", "alias": "components_alias" }}\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"-query-using-the-alias--now-fetches-from-both",children:"\ud83d\udd0d Query Using the Alias \u2014 Now Fetches from Both"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /components_alias/_search\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-try-writing-through-alias--expect-failure",children:"\u274c Try Writing Through Alias \u2014 Expect Failure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /components_alias/_doc\n{\n  "name": "New Baalu"\n}\n'})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:["\ud83d\udd25 Error: Write alias must point to exactly one index (using ",(0,i.jsx)(n.code,{children:"is_write_index: true"}),")."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"\ufe0f-set-the-write-index-explicitly",children:"\u270d\ufe0f Set the Write Index Explicitly"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /_aliases\n{\n  "actions": [\n    { "add": { "index": "index_components_default", "alias": "components_alias", "is_write_index": true }},\n    { "add": { "index": "index_components_default_v2", "alias": "components_alias", "is_write_index": false }}\n  ]\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"-now-try-posting-again",children:"\ud83d\udd01 Now Try Posting Again"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:'POST /components_alias/_doc\n{\n  "name": "New Baalu"\n}\n'})}),"\n",(0,i.jsx)(n.h4,{id:"-search-again--youll-see-the-new-doc",children:"\ud83d\udd0e Search Again \u2014 You\u2019ll See the New Doc"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /components_alias/_search\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-view-alias-mappings",children:"\ud83d\udccc View Alias Mappings"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-http",children:"GET /_alias/components_alias\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"-tldr",children:"\ud83e\udde0 TL;DR"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Use Case"}),(0,i.jsx)(n.th,{children:"Benefit"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Abstract index name"}),(0,i.jsx)(n.td,{children:"Decouples client from physical index"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Multi-index read"}),(0,i.jsx)(n.td,{children:"Combine multiple sources"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Seamless versioning"}),(0,i.jsx)(n.td,{children:"Point alias to new index version"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Controlled write"}),(0,i.jsxs)(n.td,{children:["Only one index gets writes with ",(0,i.jsx)(n.code,{children:"is_write_index"})]})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:"Want to automate this using curl, Dev Tools, or scripts? Ping me next. This is just the groundwork for production-grade alias management \ud83d\udd25"})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var a=s(6540);const i={},t=a.createContext(i);function l(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);