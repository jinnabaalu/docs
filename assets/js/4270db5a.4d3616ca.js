"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7272],{1650:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>d,contentTitle:()=>s,default:()=>u,frontMatter:()=>n,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"cert-manager/ValidateWildcard","title":"ValidateWildcard","description":"Check Cert-Manager pods and GoDaddy Webhook","source":"@site/docs/cert-manager/ValidateWildcard.md","sourceDirName":"cert-manager","slug":"/cert-manager/ValidateWildcard","permalink":"/docs/cert-manager/ValidateWildcard","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/cert-manager/ValidateWildcard.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Deploy cert-manager with wildcard","permalink":"/docs/cert-manager/DeployCertManager"},"next":{"title":"Elasticsearch Operation","permalink":"/docs/category/elasticsearch-operation"}}');var c=t(4848),i=t(8453);const n={sidebar_position:2},s=void 0,d={},o=[{value:"Check Cert-Manager pods and GoDaddy Webhook",id:"check-cert-manager-pods-and-godaddy-webhook",level:4},{value:"Validate the Godaddy API key",id:"validate-the-godaddy-api-key",level:4},{value:"Validate Cluster Issuer",id:"validate-cluster-issuer",level:4},{value:"Certificate Request validation",id:"certificate-request-validation",level:4},{value:"Validate DNS records and certificate issuance",id:"validate-dns-records-and-certificate-issuance",level:4},{value:"Check the certificate by domain",id:"check-the-certificate-by-domain",level:4}];function l(e){const a={code:"code",h1:"h1",h4:"h4",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(a.h4,{id:"check-cert-manager-pods-and-godaddy-webhook",children:"Check Cert-Manager pods and GoDaddy Webhook"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"kubectl get pods -n cert-manager\n"})}),"\n",(0,c.jsx)(a.h4,{id:"validate-the-godaddy-api-key",children:"Validate the Godaddy API key"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"kubectl get secret godaddy-api-key -n cert-manager -o yaml\n"})}),"\n",(0,c.jsx)(a.h4,{id:"validate-cluster-issuer",children:"Validate Cluster Issuer"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"kubectl describe clusterissuer letsencrypt-prod\n"})}),"\n",(0,c.jsx)(a.p,{children:"Reason:                ACMEAccountRegistered\nStatus:                True\nType:                  Ready"}),"\n",(0,c.jsx)(a.h4,{id:"certificate-request-validation",children:"Certificate Request validation"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"kubectl describe certificate wildcard-kwixeerdbms-com -n cert-manager\n"})}),"\n",(0,c.jsxs)(a.p,{children:["Name comes from the certificate.yml ",(0,c.jsx)(a.code,{children:"metadata.name"})]}),"\n",(0,c.jsx)(a.p,{children:"Message:               Certificate is up to date and has not expired\nReason:                Ready\nStatus:                True\nType:                  Ready #IF ANY ERRORS HERE REQ DEBUG"}),"\n",(0,c.jsx)(a.p,{children:"Renewal time :\nNot After:               2024-12-10T04:33:45Z\nNot Before:              2024-09-11T04:33:46Z\nRenewal Time:            2024-11-30T04:33:45Z"}),"\n",(0,c.jsx)(a.h1,{id:"list-the-certificate-request",children:"List the certificate request"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"kubectl get certificaterequest -n cert-manager\nkubectl describe certificaterequest <name> -n cert-manager\n# ex: kubectl describe certificaterequest wildcard-kwixeerdbms-com-1 -n cert-manager\n"})}),"\n",(0,c.jsx)(a.p,{children:"This prints the certificates approval and certificate status"}),"\n",(0,c.jsx)(a.h4,{id:"validate-dns-records-and-certificate-issuance",children:"Validate DNS records and certificate issuance"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"kubectl logs -n cert-manager deployment/cert-manager\n"})}),"\n",(0,c.jsx)(a.p,{children:"If you see the log like below sample: This is expected behaviour"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:'I0911 07:42:53.057749 1 sync.go:416] "certificate resource is not owned by this object. refusing to update non-owned certificate resource for object" logger="cert-manager.controller.ingress-shim" resource_name="jeevantestadminapi-kwixeerdbms-com-ingress" resource_namespace="vbv-api" resource_kind="" resource_version="" related_resource_name="wildcard-kwixeerdbms-com-tls" related_resource_namespace="vbv-api" related_resource_kind="Certificate" related_resource_version="v1"\n'})}),"\n",(0,c.jsx)(a.h4,{id:"check-the-certificate-by-domain",children:"Check the certificate by domain"}),"\n",(0,c.jsx)(a.pre,{children:(0,c.jsx)(a.code,{className:"language-bash",children:"kubectl get secret wildcard-kwixeerdbms-com-tls -n vbv-api -o yaml\n"})}),"\n",(0,c.jsxs)(a.p,{children:["Decode certificate for the domain ",(0,c.jsx)(a.code,{children:"kubectl get secret wildcard-kwixeerdbms-com-tls -n vbv-api -o jsonpath='{.data.tls\\.crt}' | base64 --decode | openssl x509 -text -noout"}),", this will give lot of info about cert like what we see in browser."]})]})}function u(e={}){const{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,c.jsx)(a,{...e,children:(0,c.jsx)(l,{...e})}):l(e)}},8453:(e,a,t)=>{t.d(a,{R:()=>n,x:()=>s});var r=t(6540);const c={},i=r.createContext(c);function n(e){const a=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(c):e.components||c:n(e.components),r.createElement(i.Provider,{value:a},e.children)}}}]);