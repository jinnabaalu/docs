"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6177],{3507:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>d,frontMatter:()=>t,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"elasticsearch/high-availability-elasticsearch-cluster/UnderstandHigh-AvailabilityElasticsearchCluster","title":"\ud83d\udc33 How to Define a Highly Available Elasticsearch Cluster","description":"Learn the basics of setting up a highly available Elasticsearch cluster, including quorum, roles, and key configuration properties.","source":"@site/docs/elasticsearch/high-availability-elasticsearch-cluster/UnderstandHigh-AvailabilityElasticsearchCluster.md","sourceDirName":"elasticsearch/high-availability-elasticsearch-cluster","slug":"/ElasticStack/UnderstandHACluster","permalink":"/oio/docs/ElasticStack/UnderstandHACluster","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/elasticsearch/high-availability-elasticsearch-cluster/UnderstandHigh-AvailabilityElasticsearchCluster.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"\ud83d\udc33 How to Define a Highly Available Elasticsearch Cluster","description":"Learn the basics of setting up a highly available Elasticsearch cluster, including quorum, roles, and key configuration properties.","slug":"/ElasticStack/UnderstandHACluster"},"sidebar":"tutorialSidebar","previous":{"title":"HA Cluster","permalink":"/oio/docs/category/ha-cluster"},"next":{"title":"\ud83d\udc33 Elasticsearch 3-Node Cluster Setup","permalink":"/oio/docs/ElasticStack/elasticsearch-3-node"}}');var r=i(4848),l=i(8453);const t={sidebar_position:1,title:"\ud83d\udc33 How to Define a Highly Available Elasticsearch Cluster",description:"Learn the basics of setting up a highly available Elasticsearch cluster, including quorum, roles, and key configuration properties.",slug:"/ElasticStack/UnderstandHACluster"},a=void 0,o={},c=[{value:"Introduction: Why High Availability in Elasticsearch?",id:"introduction-why-high-availability-in-elasticsearch",level:2},{value:"What is a Single-Node Elasticsearch Setup?",id:"what-is-a-single-node-elasticsearch-setup",level:3},{value:"What are Failures in Elasticsearch?",id:"what-are-failures-in-elasticsearch",level:3},{value:"Why Choose High Availability (HA)?",id:"why-choose-high-availability-ha",level:3},{value:"1. Understanding Quorum in Elasticsearch",id:"1-understanding-quorum-in-elasticsearch",level:2},{value:"Quorum Formula",id:"quorum-formula",level:3},{value:"Why is Quorum Important?",id:"why-is-quorum-important",level:3},{value:"2. Elasticsearch Node Roles: What Are They and When to Use Them?",id:"2-elasticsearch-node-roles-what-are-they-and-when-to-use-them",level:2},{value:"2.1. Node Roles",id:"21-node-roles",level:3},{value:"2.2. When to Use Specific Roles?",id:"22-when-to-use-specific-roles",level:3},{value:"Essential Configuration for a 3-Node Elasticsearch Cluster",id:"essential-configuration-for-a-3-node-elasticsearch-cluster",level:2},{value:"Conclusion",id:"conclusion",level:2}];function h(e){const s={a:"a",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.h2,{id:"introduction-why-high-availability-in-elasticsearch",children:"Introduction: Why High Availability in Elasticsearch?"}),"\n",(0,r.jsx)(s.p,{children:"Before setting up a highly available (HA) Elasticsearch cluster, let's cover some key concepts."}),"\n",(0,r.jsx)(s.h3,{id:"what-is-a-single-node-elasticsearch-setup",children:"What is a Single-Node Elasticsearch Setup?"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"single-node Elasticsearch"})," setup handles everything\u2014data, searches, and cluster management\u2014on one node. While simple, it\u2019s risky: if the node fails, the entire system crashes, and you might lose data."]}),"\n",(0,r.jsx)(s.h3,{id:"what-are-failures-in-elasticsearch",children:"What are Failures in Elasticsearch?"}),"\n",(0,r.jsx)(s.p,{children:"Failures can come from:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Node Failures"}),": If your only node crashes, the whole cluster stops."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Network Issues"}),": Network problems can cause the cluster to split."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Hardware Failures"}),": Hardware issues can make the node unavailable."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"why-choose-high-availability-ha",children:"Why Choose High Availability (HA)?"}),"\n",(0,r.jsxs)(s.p,{children:["A ",(0,r.jsx)(s.strong,{children:"High Availability (HA)"})," setup spreads your data across multiple nodes. If one node fails, the others continue serving requests, keeping the system operational and reducing downtime."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"1-understanding-quorum-in-elasticsearch",children:"1. Understanding Quorum in Elasticsearch"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:"Quorum"})," is the minimum number of nodes that must agree on decisions (e.g., electing a master or modifying data). It helps prevent ",(0,r.jsx)(s.strong,{children:"split-brain scenarios"}),", where the cluster splits into two independent clusters."]}),"\n",(0,r.jsx)(s.h3,{id:"quorum-formula",children:"Quorum Formula"}),"\n",(0,r.jsxs)(s.p,{children:["The quorum formula in Elasticsearch is based on the number of ",(0,r.jsx)(s.strong,{children:"master-eligible nodes"}),": ",(0,r.jsx)(s.code,{children:"Quorum = (Number of master-eligible nodes / 2) + 1"})]}),"\n",(0,r.jsx)(s.p,{children:"For a 3-node cluster:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Quorum = ",(0,r.jsx)(s.code,{children:"(3 / 2) + 1 = 2"})]}),"\n",(0,r.jsxs)(s.li,{children:["So, at least ",(0,r.jsx)(s.strong,{children:"2 nodes"})," must agree for the cluster to function."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"If only 1 node is available, the cluster is considered unavailable."}),"\n",(0,r.jsx)(s.h3,{id:"why-is-quorum-important",children:"Why is Quorum Important?"}),"\n",(0,r.jsxs)(s.p,{children:["Quorum ensures ",(0,r.jsx)(s.strong,{children:"cluster stability"})," and prevents ",(0,r.jsx)(s.strong,{children:"split-brain"})," scenarios, where multiple master nodes could conflict."]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"2-elasticsearch-node-roles-what-are-they-and-when-to-use-them",children:"2. Elasticsearch Node Roles: What Are They and When to Use Them?"}),"\n",(0,r.jsx)(s.p,{children:"Elasticsearch nodes can serve different roles. Here\u2019s a quick look:"}),"\n",(0,r.jsx)(s.h3,{id:"21-node-roles",children:"2.1. Node Roles"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Master Node"}),": Manages cluster state and node changes."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Data Node"}),": Stores data and handles search/indexing."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Ingest Node"}),": Pre-processes documents before indexing."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"ML Node"}),": Handles machine learning tasks (remove if unused)."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Coordinating Node"}),": Routes requests to appropriate nodes."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Remote Cluster Client"}),": Connects to external clusters."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Transform Node"}),": Performs data transformations."]}),"\n"]}),"\n",(0,r.jsx)(s.h3,{id:"22-when-to-use-specific-roles",children:"2.2. When to Use Specific Roles?"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Small Cluster (3 nodes)"}),": Typically, assign ",(0,r.jsx)(s.strong,{children:"all roles"})," to each node for simplicity and redundancy."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Larger Clusters"}),":","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["Assign ",(0,r.jsx)(s.strong,{children:"Data Nodes"})," to storage-heavy nodes."]}),"\n",(0,r.jsxs)(s.li,{children:["Use ",(0,r.jsx)(s.strong,{children:"dedicated Master Nodes"})," for stability."]}),"\n",(0,r.jsxs)(s.li,{children:["Remove unused roles (like ",(0,r.jsx)(s.strong,{children:"ML"}),") to optimize performance."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"We\u2019ll dive deeper into specific roles in future blogs."}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"essential-configuration-for-a-3-node-elasticsearch-cluster",children:"Essential Configuration for a 3-Node Elasticsearch Cluster"}),"\n",(0,r.jsx)(s.p,{children:"For a basic 3-node cluster, these two properties are sufficient:"}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"cluster.initial_master_nodes"})}),(0,r.jsx)(s.br,{}),"\n","Defines the initial master-eligible nodes to form the cluster. Used only during the first start-up."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-yaml",children:"cluster.initial_master_nodes: elasticsearch-1, elasticsearch-2, elasticsearch-3\n"})}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:["\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.strong,{children:(0,r.jsx)(s.code,{children:"discovery.seed_hosts"})}),"\nLists nodes to help discover and join the cluster. Used by new nodes when they start."]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-bash",children:"discovery.seed_hosts: elasticsearch-2, elasticsearch-3\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(s.hr,{}),"\n",(0,r.jsx)(s.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,r.jsx)(s.p,{children:"Setting up a highly available Elasticsearch cluster ensures reliability during node failures. In this blog, we\u2019ve covered:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["The risks of a ",(0,r.jsx)(s.strong,{children:"single-node setup"}),"."]}),"\n",(0,r.jsxs)(s.li,{children:["The importance of ",(0,r.jsx)(s.strong,{children:"quorum"})," for stability."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Node roles"})," and when to assign them."]}),"\n",(0,r.jsxs)(s.li,{children:["Key ",(0,r.jsx)(s.strong,{children:"configuration properties"})," for high availability."]}),"\n"]}),"\n",(0,r.jsx)(s.p,{children:"Next, we\u2019ll explore specific roles and cluster scaling. Stay tuned!"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.a,{href:"/oio/docs/ElasticStack/elasticsearch-3-node",children:"Learn how to run a high-availability 3-node cluster"}),"."]})]})}function d(e={}){const{wrapper:s}={...(0,l.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>t,x:()=>a});var n=i(6540);const r={},l=n.createContext(r);function t(e){const s=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);